gsap.registerPlugin(ScrollTrigger),function(){const t=".ca-about-product.how-it-works",e=".steps .step",o=".right-panel .device-mockup",r=".steps .ticker",s=".steps .ticker.mobile",i=".steps .ticker.mobile .hiw-track",a=".steps .ticker.mobile .ticker-thumb",n=".steps .ticker.mobile .hiw-stop";function c(){const t=gsap.utils.toArray(e),r=gsap.utils.toArray(o);gsap.set(t,{opacity:1,clearProps:"y"}),gsap.set(r,{opacity:1,clearProps:"y,scale"})}window.howItWorksInit=function(){const p=document.querySelector(t);if(!p)return;if("1"===p.dataset.hiwInit)return;p.dataset.hiwInit="1";const l=window.matchMedia("(prefers-reduced-motion: reduce)").matches;ScrollTrigger.getAll().forEach(t=>{t.vars?.id&&String(t.vars.id).startsWith("HIW")&&t.kill()}),ScrollTrigger.matchMedia({"(min-width: 992px)":()=>{l?c():function(){const s=document.querySelector(t),i=gsap.utils.toArray(e),a=gsap.utils.toArray(o),n=s.querySelector(r);if(i.length<2||a.length<2||!n)return;const c=()=>{const t=i[0].getBoundingClientRect().top+window.scrollY;return i.map(e=>e.getBoundingClientRect().top+window.scrollY-t)};let p=c();ScrollTrigger.addEventListener("refreshInit",()=>{p=c()}),gsap.set(i,{opacity:0}),gsap.set(a,{opacity:0}),gsap.set(i[0],{opacity:1}),gsap.set(a[0],{opacity:1});const l=gsap.timeline({defaults:{ease:"power2.out",duration:.3},scrollTrigger:{id:"HIW-desktop",trigger:s,start:"42% top",end:"+="+100*(i.length-1)+"%",scrub:!0,pin:!0,pinSpacing:!0}});i.forEach((t,e)=>{const o=i[e+1],r=a[e+1];o&&r&&l.to(n,{y:()=>p[e+1]},"+=0.1").to(o,{opacity:1},"<").to(t,{opacity:0},"<").to(r,{opacity:1},"<").to(a[e],{opacity:0},"<")})}()},"(max-width: 991px)":()=>{l?c():function(){const r=document.querySelector(t),c=r.querySelector(s),p=r.querySelector(i),l=r.querySelector(a),g=gsap.utils.toArray(n),u=gsap.utils.toArray(o),d=gsap.utils.toArray(e);if(!c||!p||!l||g.length<2)return;let h=[];const y=()=>{h.length=0;const t=p.getBoundingClientRect();g.forEach(e=>{const o=e.getBoundingClientRect();h.push(o.left+o.width/2-t.left)})};y(),ScrollTrigger.addEventListener("refreshInit",y),gsap.set(l,{x:h[0]}),gsap.set(d,{opacity:0,y:8}),gsap.set(u,{opacity:0,y:8,scale:.98}),gsap.set(d[0],{opacity:1,y:0}),gsap.set(u[0],{opacity:1,y:0,scale:1});const f=t=>{g.forEach((e,o)=>gsap.to(e,{opacity:o===t?1:.5,duration:.2})),u.forEach((e,o)=>gsap.to(e,{opacity:o===t?1:0,y:o===t?0:8,scale:o===t?1:.98,duration:.3,ease:"power2.out"})),d.forEach((e,o)=>gsap.to(e,{opacity:o===t?1:0,y:o===t?0:8,duration:.25,ease:"power2.out"}))};gsap.timeline({scrollTrigger:{id:"HIW-mobile",trigger:r,start:"top top",end:"+="+100*(g.length-1)+"%",pin:!0,scrub:!0,pinSpacing:!0,snap:{snapTo:t=>Math.round(t*(g.length-1))/(g.length-1),duration:.18,ease:"power1.out"},onUpdate:t=>{const e=t.progress*(g.length-1),o=Math.floor(e),r=e-o,s=gsap.utils.interpolate(h[o],h[o+1]??h[o],r);gsap.set(l,{x:s})},onSnapComplete:t=>{const e=Math.round(t.progress*(g.length-1));f(e)}}});f(0)}()}});const g=p.querySelectorAll("img");let u=g.length||0;u&&g.forEach(t=>{t.complete?0===--u&&ScrollTrigger.refresh():t.addEventListener("load",()=>{0===--u&&ScrollTrigger.refresh()},{once:!0})})}}();