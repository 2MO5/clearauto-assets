!function(e){e.vinCardsInit=function(e){"use strict";if(!e.gsap||!e.ScrollTrigger)return console.warn("[vin-cards] GSAP + ScrollTrigger required before this file."),function(){};const t=e.gsap,n=e.ScrollTrigger;t.registerPlugin(n);const a={deferred:[]};function r(){const r=".scroll-stack-section",i=".card-stack-container",o=".card-benefit",s=".ca-vin-input-section",c=document.querySelector(r),l=document.querySelector(i),u=t.utils.toArray(o);if(!c||!l||0===u.length||"1"===l.dataset.vinInit)return;l.dataset.vinInit="1";const d=()=>e.matchMedia("(min-width: 992px)").matches,p=()=>d()?90:40;let h=d();function f(e){h=!e&&d()}t.set(l,{position:"relative",height:Math.min(.6*e.innerHeight,640),overflow:"hidden"}),t.set(u,{position:"absolute",inset:0,margin:"auto",transformOrigin:"50% 70%",willChange:"transform,opacity",zIndex:0}),u.forEach((e,n)=>{n<3?t.set(e,{opacity:1-.15*n,scale:1-.05*n,y:36*n,zIndex:u.length-n}):t.set(e,{opacity:0,scale:.86,y:108,zIndex:0})});const y=u.length,g=.95,m="power3.out",v=460;function w(e){u.forEach((t,n)=>{n===e?(t.classList.add("is-active"),t.setAttribute("aria-hidden","false"),t.style.pointerEvents="auto"):(t.classList.remove("is-active"),t.setAttribute("aria-hidden","true"),t.style.pointerEvents="none")})}function E(e){const n=e%y,a=(e+1)%y,r=(e+2)%y;w(n),u.forEach((e,i)=>{const o=i===n?{opacity:1,scale:1,y:0,zIndex:3}:i===a?{opacity:.85,scale:.95,y:36,zIndex:2}:i===r?{opacity:.7,scale:.9,y:72,zIndex:1}:{opacity:0,scale:.86,y:108,zIndex:0};i===n?e.classList.add("ring-sweep"):e.classList.remove("ring-sweep"),t.to(e,{...o,duration:g,ease:m})})}E(0);const L=t.timeline({paused:!0});for(let e=0;e<y;e++)L.add(()=>E(e),e);E(0);const x=(e,t,n)=>Math.max(t,Math.min(n,e)),S=e=>h?(e%y+y)%y:x(e,0,y-1);let b=0,k=0,I=!1;const A=n.getScrollFunc(e),M=()=>{const t=Math.max(y-1,1),n=.9*e.innerHeight,a=.6*e.innerHeight;return Math.max(e.innerHeight,t*n+a)/t};function T(n){if(I)return;const a=performance.now();if(a-k<v)return;I=!0,k=a;const r=b;if(b=S(n),t.killTweensOf(L),t.to(L,{time:b,duration:g,ease:m,onComplete:()=>{I=!1}}),!d()&&e.__vinPinST&&e.__vinPinST.isActive){const e=b>r?1:b<r?-1:0;if(0!==e){const t=M(),n=A();A(n+e*t)}}}function H(){a.deferred.forEach(e=>{e._armed||(e._armed=!0,t.delayedCall(1.05,()=>{e.ctaTL._played||(e.ctaTL.play(),e.ctaTL._played=!0)}))})}const P=document.querySelector(s)?s:r,q=1.2*e.innerHeight,_=.6*e.innerHeight,z=y-1;let D;D=d()?Math.max(e.innerHeight,z*q/2+_):Math.max(e.innerHeight,z*(.9*e.innerHeight)+_);const O=n.create({trigger:P,start:"30% top",end:()=>"+="+D,pin:!0,pinSpacing:!0,anticipatePin:1,onEnter:()=>{f(!0),j()},onEnterBack:()=>{f(!0),j()},onLeave:()=>{F(),f(!1),H()},onLeaveBack:()=>{F(),f(!1)}});e.__vinPinST=O;let C=null,Y=0;const B=()=>!h&&0===b,R=()=>!h&&b===y-1;function U(e){Y+=e,Math.abs(Y)>=p()&&(I||T(Y>0?b+1:b-1),Y=0)}function $(e){const t=e.deltaY;R()&&t>0||B()&&t<0||(e.preventDefault(),U(t))}function j(){e.addEventListener("wheel",$,{passive:!1}),e.addEventListener("touchstart",G,{passive:!0}),e.addEventListener("touchmove",J,{passive:!1}),e.addEventListener("touchend",K,{passive:!0}),e.addEventListener("keydown",N)}function F(){e.removeEventListener("wheel",$,{passive:!1}),e.removeEventListener("touchstart",G,{passive:!0}),e.removeEventListener("touchmove",J,{passive:!1}),e.removeEventListener("touchend",K,{passive:!0}),e.removeEventListener("keydown",N),Y=0,C=null}function G(e){C=e.touches&&e.touches.length?e.touches[0].clientY:null}function J(e){if(null==C)return;const t=e.touches[0].clientY,n=C-t;C=t,R()&&n>0||B()&&n<0||(e.preventDefault(),U(n))}function K(){C=null,Y=0}function N(e){"ArrowDown"!==e.key&&"PageDown"!==e.key||(e.preventDefault(),T(b+1)),"ArrowUp"!==e.key&&"PageUp"!==e.key||(e.preventDefault(),T(b-1))}function Q(){t.set(l,{height:Math.min(.6*e.innerHeight,640)});const n=e.innerHeight,a=1.2*n,r=.9*n,i=.6*n;let o;o=d()?Math.max(n,z*a/2+i):Math.max(n,z*r+i),O.vars.end="+="+o,O.refresh(),f(O.isActive)}e.addEventListener("resize",Q)}function i(){const e=".scroll-stack-section",a=".ca-vin-input-section",r=".card-stack-container",i=".ca-cta-block",o=document.querySelector(e);if(!o||"1"===o.dataset.secIntroInit)return;o.dataset.secIntroInit="1";const s=o.querySelector(a),c=o.querySelector(r),l=Array.from(o.children).filter(e=>e!==s&&e!==c&&!e.matches(i));[...l,c].forEach(e=>{e&&(e.style.removeProperty("transform"),e.style.removeProperty("opacity"))});const u=t.timeline({paused:!0,defaults:{duration:.7,ease:"power3.out",overwrite:"auto"}});l.length&&u.from(l,{y:24,opacity:0,stagger:{each:.07,from:"start"},force3D:!0},0),c&&u.from(c,{y:16,opacity:0,duration:.6,ease:"power2.out",force3D:!0},.1),n.create({trigger:o,start:"top 85%",end:"top 65%",once:!0,onEnter:()=>u.play().then(()=>{t.set(l,{clearProps:"transform,opacity,will-change"}),c&&t.set(c,{clearProps:"transform,opacity,will-change"})})})}function o(){const n=document.querySelectorAll(".ca-cta-block");n.length&&!e.matchMedia("(prefers-reduced-motion: reduce)").matches&&n.forEach(e=>{if("1"===e.dataset.ctaInit)return;e.dataset.ctaInit="1";const n=".ca-heading-cta",r=".ca-button--primary-2.cta-style",i=".ca-cta-socialstrip .users",o=".ca-cta-socialstrip h1, .ca-cta-socialstrip .stat";t.context(s=>{const c=s.selector,l=c(n)[0];let u=[];if(l&&!l.querySelector(".w")){const e=l.textContent.trim().split(/\s+/);l.innerHTML=e.map(e=>`<span class="w">${e}&nbsp;</span>`).join(""),u=l.querySelectorAll(".w")}else l&&(u=l.querySelectorAll(".w"));t.set(u.length?u:c(n),{opacity:0,y:24,filter:"blur(6px)"}),t.set(c(r),{opacity:0,y:18,scale:.98,filter:"blur(6px)"});const d=c(`${i} img`);d.length?t.set(d,{opacity:0,y:16,x:-8,rotate:-6,transformOrigin:"50% 50%"}):t.set(c(i),{opacity:0,y:16}),t.set(c(o),{opacity:0,y:12});const p=e.hasAttribute("data-cta-defer"),h=e.dataset.ctaStart||"top 75%",f=e.dataset.ctaEnd||null,y=e.classList.contains("ca-cta-center"),g={ease:"power3.out"},m=f?{trigger:e,start:h,end:f,once:!0,invalidateOnRefresh:!0}:{trigger:e,start:h,once:!0,invalidateOnRefresh:!0},v=t.timeline(p?{paused:!0,defaults:g}:{defaults:g,scrollTrigger:m});v.to(u.length?u:c(n),{opacity:1,y:0,filter:"blur(0px)",duration:.7,stagger:u.length?{each:.06,from:"start"}:0}).fromTo(c(r),{autoAlpha:0,y:18,scale:.98,filter:"blur(6px)"},{autoAlpha:1,y:0,scale:1,filter:"blur(0px)",duration:.55,overwrite:"auto"},"-=0.2").to(d.length?d:c(i),{opacity:1,y:0,x:0,rotate:0,duration:.5,stagger:d.length?{each:.07,from:y?"center":"start"}:0},"-=0.15").to(c(o),{opacity:1,y:0,duration:.4},"-=0.25");const w=c(r)[0];if(w){const e=t.to(w,{scale:1.008,duration:1.8,repeat:-1,yoyo:!0,ease:"sine.inOut"});w.addEventListener("mouseenter",()=>e.pause()),w.addEventListener("mouseleave",()=>e.resume()),v.add(()=>e.play())}d.length&&t.to(d,{y:"+=4",duration:2.2,repeat:-1,yoyo:!0,ease:"sine.inOut",stagger:{each:.2,from:"random"}}),p&&a.deferred.push({ctaTL:v,block:e,_armed:!1})},e)})}function s(){r(),i(),o()}return s}(e)}(window);